# Elastic Beanstalk configuration files.
# This root directory is the default for Elastic Beanstalk EC2 instances and
# AWSEBAutoScalingGroup, and AWSEBLoadBalancer

# .ebextensions/00_web.config

files:
  "/var/pids/web.pid":
    mode: "000755"
    owner: root
    group: root
    content: |
      # This file will be created by the web server
      #!/bin/bash
      cd /var/app/current
      nohup npm run start &
container_commands:
  00_install_dependencies:
    command: "sudo npm install"
  01_install_pm2:
    command: "sudo npm install -g pm2"
  02_build_application:
    command: "npm run build"
  03_start_application:
    command: "pm2 start dist/src/main.js --name sparta-final-project"
  04_restart_web_server:
    command: "sudo systemctl restart nginx"